-- üîµ MOD MENU + ESP - FUNCIONA 100%
repeat wait() until game:IsLoaded()

local player = game.Players.LocalPlayer
local Camera = workspace.CurrentCamera
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ModMenuBolinha"
screenGui.ResetOnSpawn = false

-- Adiciona no PlayerGui (mais confi√°vel)
pcall(function() screenGui.Parent = game.StarterGui end)
if not screenGui.Parent then
    screenGui.Parent = player:WaitForChild("PlayerGui")
end

-- BOLINHA AZUL
local ball = Instance.new("TextButton")
ball.Text = ""
ball.Size = UDim2.new(0, 60, 0, 60)
ball.Position = UDim2.new(0, 20, 0, 20)
ball.BackgroundColor3 = Color3.fromRGB(0, 140, 255)
ball.BorderSizePixel = 0
ball.Parent = screenGui

-- Deixa redonda
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(1, 0)
corner.Parent = ball

-- MENU
local menu = Instance.new("Frame")
menu.Size = UDim2.new(0, 200, 0, 200)
menu.Position = UDim2.new(0, 90, 0, 20)
menu.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
menu.BorderSizePixel = 2
menu.BorderColor3 = Color3.fromRGB(100, 100, 100)
menu.Visible = false
menu.Parent = screenGui

-- T√çTULO
local title = Instance.new("TextLabel")
title.Text = "MOD MENU"
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.Parent = menu

-- BOT√ÉO ESP
local espBtn = Instance.new("TextButton")
espBtn.Text = "ESP: ‚ùå"
espBtn.Size = UDim2.new(1, -10, 0, 30)
espBtn.Position = UDim2.new(0, 5, 0, 40)
espBtn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
espBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
espBtn.Font = Enum.Font.Gotham
espBtn.Parent = menu

-- ESP
local espEnabled = false
local ESP = {}

local function getDistance(p)
    local hrp = player.Character:FindFirstChild("HumanoidRootPart")
    local target = p.Character:FindFirstChild("HumanoidRootPart")
    if hrp and target then
        return math.floor((hrp.Position - target.Position).Magnitude)
    end
    return 0
end

game:GetService("RunService").RenderStepped:Connect(function()
    if not espEnabled then return end
    for _, p in pairs(game.Players:GetPlayers()) do
        if p ~= player then
            local isEnemy = true
            if player.Team and p.Team == player.Team then
                isEnemy = false
            end
            if isEnemy and p.Character and p.Character:FindFirstChild("Head") then
                local head = p.Character.Head
                local pos, onScreen = Camera:WorldToViewportPoint(head.Position + Vector3.new(0, 0.5, 0))
                if onScreen then
                    if not ESP[p] then
                        ESP[p] = { Name = Drawing.new("Text"), Distance = Drawing.new("Text") }
                    end
                    local e = ESP[p]
                    e.Name.Visible = true
                    e.Name.Text = p.Name
                    e.Name.Size = 15
                    e.Name.Color = Color3.fromRGB(255, 255, 255)
                    e.Name.Position = Vector2.new(pos.X, pos.Y - 25)
                    e.Name.Center = true
                    e.Name.Outline = true
                    e.Name.Font = 2

                    e.Distance.Visible = true
                    e.Distance.Text = getDistance(p).."m"
                    e.Distance.Size = 12
                    e.Distance.Color = Color3.fromRGB(255, 220, 0)
                    e.Distance.Position = Vector2.new(pos.X, pos.Y - 8)
                    e.Distance.Center = true
                    e.Distance.Outline = true
                    e.Distance.Font = 2
                else
                    if ESP[p] then
                        e.Name.Visible = false
                        e.Distance.Visible = false
                    end
                end
            else
                if ESP[p] then
                    ESP[p].Name.Visible = false
                    ESP[p].Distance.Visible = false
                    ESP[p] = nil
                end
            end
        end
    end
end)

-- Toggle ESP
espBtn.MouseButton1Click:Connect(function()
    espEnabled = not espEnabled
    espBtn.Text = "ESP: "..(espEnabled and "‚úÖ" or "‚ùå")
    if not espEnabled then
        for _, e in pairs(ESP) do
            e.Name.Visible = false
            e.Distance.Visible = false
        end
    end
end)

-- Abrir menu
ball.MouseButton1Click:Connect(function()
    menu.Visible = not menu.Visible
end)

print("‚úÖ Menu + ESP carregado! Clique na bolinha azul.")
